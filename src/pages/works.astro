---
import { getCollection, type CollectionEntry } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import { getProjectLink } from "../utils/links";

const projects = await getCollection("projects");
const sortedProjects = projects.sort(
    (a: CollectionEntry<"projects">, b: CollectionEntry<"projects">) =>
        a.data.order - b.data.order,
);
---

<BaseLayout
    backgroundColor="#ffffff"
    title="Works"
    metaDescription="All projects by Acetone"
    metaKeywords="design, graphic design, projects"
    pageType="works"
>
    <div class="detailslist" id="scrollpager">
        {
            sortedProjects.map((project) => (
                <div class="detailslist-item">
                    <div class="detailslist-desc">
                        <p><strong>{project.data.title}</strong></p>
                    </div>
                    <a href={getProjectLink(project.slug)}>
                        <Image
                            src={project.data.images[0].default}
                            width={1300}
                            height={860}
                            alt={project.data.images[0].title}
                            loading="lazy"
                        />
                    </a>
                </div>
            ))
        }
    </div>
</BaseLayout>
