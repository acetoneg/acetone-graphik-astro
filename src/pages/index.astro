---
import { getCollection, type CollectionEntry } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

const projects: CollectionEntry<"projects">[] = await getCollection("projects");
const sortedProjects = projects.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Portfolio">
    <main>
        {
            sortedProjects.map((project) => (
                <a href={`/projects/${project.slug}`}>
                    <article>
                        <h2>{project.data.title}</h2>
                        {project.data.images.length > 0 && (
                            <img
                                src={project.data.images[0].default}
                                alt={project.data.images[0].title}
                            />
                        )}
                    </article>
                </a>
            ))
        }
    </main>
</BaseLayout>
